(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{eef8:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("q-toolbar",{staticClass:"q-pl-lg"},[a("q-toolbar-title",{staticClass:"page-title"},[e._v("Data Benih")])],1),a("q-toolbar",{staticClass:"q-mx-sm"},[a("q-select",{staticStyle:{width:"200px"},attrs:{options:e.varietas_options,label:"Pilih Varietas",dense:"",outlined:""},model:{value:e.varietas,callback:function(t){e.varietas=t},expression:"varietas"}}),a("q-space"),a("q-btn",{staticClass:"q-mr-sm",attrs:{to:"/app/upload",outline:"",icon:"cloud_upload"}}),a("q-btn",{staticClass:"q-mr-sm",attrs:{outline:"",icon:"print"}}),a("q-btn",{attrs:{unelevated:"",color:"positive",icon:"create",to:"/app/peminjaman/add"}})],1),a("q-card",{attrs:{flat:""}},[a("q-card-section",[a("q-table",{attrs:{flat:"",columns:e.headers,data:e.filtered,loading:e.loading},scopedSlots:e._u([{key:"body-cell-accepted",fn:function(t){return[a("q-td",[a("strong",[e._v(e._s(t.row.accepted?"Diterima":"Ditolak"))])])]}},{key:"body-cell-action",fn:function(t){return[a("q-td",[a("q-btn",{attrs:{size:"xs",dense:"",dark:"",unelevated:"",color:"negative",icon:"remove"},on:{click:function(a){return e.show_delete_warning(t.row._id)}}}),a("q-btn",{staticClass:"q-ml-xs",attrs:{size:"xs",dense:"",unelevated:"",dark:"",color:"primary",icon:"create"},on:{click:function(a){return e.open_edit(t.row.id)}}})],1)]}}])})],1)],1),a("q-dialog",{model:{value:e.delete_dialog,callback:function(t){e.delete_dialog=t},expression:"delete_dialog"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("q-avatar",{attrs:{icon:"signal_wifi_off",color:"primary","text-color":"white"}}),a("span",{staticClass:"q-ml-sm"},[e._v("Anda akan menghapus data "+e._s(e.delete_id)+".")])],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Yes",color:"primary"},on:{click:function(t){return e.delete_alternative()}}})],1)],1)],1),a("router-view",{on:{update:e.load_alternatives}})],1)},n=[],i=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("456d"),a("f751"),a("c47a")),s=a.n(i),o=a("967e"),l=a.n(o),c=(a("96cf"),a("fa84")),u=a.n(c),d=a("4db1"),p=a.n(d),f=(a("6b54"),a("06db"),a("a481"),a("780a"));function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e){return"Rp, ".concat(e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."))}var b={name:"ListPeminjaman",data:function(){return{keyword:"",active_filter:"all",filter_toggles:[{label:"Semua",value:"all"},{label:"Diterima",value:"accepted"},{label:"Ditolak",value:"rejected"}],varietas_options:["semua","inpari 6 jete","inpago 8","membramo","ciherang"],varietas:"semua",loading:!1,items:[],base_headers:[{name:"id",label:"ID",field:"_id",required:!0,align:"left",format:function(e){return e.substring(0,5)+"..."}},{name:"varietas",label:"Varietas",field:"varietas",required:!0,align:"left"}],kriteria_headers:[],kriteria:[],delete_dialog:!1,delete_id:""}},computed:{headers:function(){return[].concat(p()(this.base_headers),p()(this.kriteria_headers),[{name:"action",label:"",field:"_id",align:"right"}])},filtered:function(){var e=this.varietas;return"semua"==e?this.items:this.items.filter((function(t){return t.varietas===e}))}},methods:{load_kriteria:function(){var e=u()(l.a.mark((function e(){var t,a=this;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["b"].get("/kriteria",{params:{keyword:""}});case 2:t=e.sent,this.kriteria=t.data,t.data.forEach((function(e){var t={name:e.column_name,label:e.label,field:e.column_name,required:!0,align:"left"};"rupiah"==e.display_type&&(t.format=function(e,t){return v(e)}),a.kriteria_headers.push(t)}));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),load_alternatives:function(){var e=u()(l.a.mark((function e(){var t,a,r;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,t={keyword:this.keyword,accepted:this.active_filter},e.next=4,f["b"].get("/alternative",{params:t});case 4:a=e.sent,r=a.data.map((function(e){return h({id:e._id},e)})),this.items=r.map((function(e){return e.kriteria_data.forEach((function(t){var a={};a[t.column_name]=t.value,Object.assign(e,a)})),e})),this.loading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),delete_alternative:function(){var e=u()(l.a.mark((function e(){return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["b"].delete("/alternative/".concat(this.delete_id),{headers:{"Content-Type":"text/plain"}});case 2:this.load_alternatives();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),show_delete_warning:function(e){console.log(e),this.delete_id=e,this.delete_dialog=!0},open_edit:function(e){this.$router.push("/app/peminjaman/edit/".concat(e))}},mounted:function(){var e=u()(l.a.mark((function e(){return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.load_kriteria();case 2:return e.next=4,this.load_alternatives();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},_=b,g=a("2877"),w=Object(g["a"])(_,r,n,!1,null,null,null);t["default"]=w.exports}}]);